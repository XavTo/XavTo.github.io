{{ define "main" }}
<main>
    <!-- Conteneur avec image de fond semi-transparente et support pour les thèmes light/dark -->
    <div class="relative bg-gray-200 dark:bg-gray-900">
        <div class="absolute inset-0 bg-cover bg-center bg-no-repeat opacity-50" style="background-image: url('/images/background.webp');"></div> <!-- Image de fond semi-transparente -->
        <div class="relative max-w-screen-xl px-4 py-16 mx-auto text-center lg:text-left"> <!-- Contenu relatif pour rester au-dessus de l'image -->
            <h1 class="mb-4 text-4xl font-extrabold leading-none tracking-tight text-black md:text-5xl xl:text-6xl">
                {{ .Site.Title }}
            </h1>
            <h2 class="pb-4 text-2xl font-light text-black md:text-3xl">
                {{ .Site.Params.Moto }}
            </h2>
            <p class="max-w-xl mx-auto mb-6 font-normal text-black lg:mx-0 xl:mb-2 md:text-lg xl:text-xl">
                {{ .Site.Params.Description }}
            </p>
        </div>
    </div>         

    <!-- Burger section -->
    <section id="burgers" class="container mx-auto my-10">
        <h2 class="text-4xl font-bold text-center text-gray-900 dark:text-white mb-8"><br>Our Burgers</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6">
            {{ $burgers := .Site.Data.burgers }}
            {{ range $burgers }}
            <div class="burger-card bg-gray-100 dark:bg-gray-800 p-4 rounded-lg max-w-xs mx-auto"> <!-- Fond avec support pour light/dark -->
                <!-- Réduction de la taille de l'image à h-16 pour rendre l'image plus petite -->
                <img src="{{ .image }}" alt="{{ .title }}" class="w-full h-16 object-cover rounded-md">
                <h3 class="text-lg font-bold text-gray-900 dark:text-white mt-4">{{ .title }}</h3> <!-- Texte ajusté pour les thèmes -->
                <p class="text-gray-600 dark:text-gray-300 mt-2">{{ .description }}</p> <!-- Texte pour light/dark -->
                <p class="text-gray-500 dark:text-gray-400 mt-4 font-semibold">{{ .price }}</p> <!-- Prix pour les thèmes -->
            </div>
            {{ end }}
        </div>
    </section>

    <!-- Blog section -->
    <div class="relative px-1 pt-8 pb-4 bg-transparent lg:px-8 lg:pt-12 lg:mb-4 md:mt-12">
        <div class="absolute inset-0">
            <div class="bg-gray-200 dark:bg-gray-900/50 h-1/3 sm:h-2/3"></div>
        </div>
        <div class="relative px-2 mx-auto max-w-7xl">
            <div class="text-center">
                <h2 class="text-3xl font-black tracking-tight text-primary-500 dark:text-primary-300 sm:text-4xl">
                    {{ .Site.Params.P4.Heading }}
                </h2>
                {{ range .Site.Params.P4.Content }}
                <p class="max-w-2xl mx-auto mt-3 text-xl text-gray-500 dark:text-gray-300 sm:mt-4">
                    {{ .text }}
                </p>
                {{ end }}
            </div>

            <div class="mx-auto text-gray-900 dark:text-gray-50 max-w-7xl md:px-1.5">
                <div class="px-4 text-gray-900 dark:text-white not-prose dark:text-zinc-200">
                    <div class="grid gap-4 mx-auto mt-12 mb-4 lg:max-w-none sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
                        {{ range (.Paginator 9).Pages }} <!-- S'assure que 9 articles s'affichent par page -->
                        {{ if eq .Section "blog" }}
                        <div class="flex flex-col overflow-hidden rounded-lg shadow-lg bg-gray-50 dark:bg-gray-900">
                            <a href="{{.Permalink}}">
                                {{ with .Params.featured_image }}
                                {{ with resources.Get . }}
                                {{ $postimage := (.Resize "500x webp q90").RelPermalink }}
                                <img src="{{ $postimage }}" class="object-fill overflow-hidden rounded-t-lg" width="100%" height="" loading="lazy" alt="{{ .Title }}" />
                                {{ end }}
                                {{ end }}
                            </a>
                            <div class="p-6">
                                <div class="flex-1">
                                    <a href="{{.Permalink}}" class="block mt-2 text-2xl font-black text-gray-900 dark:text-gray-200 hover:text-primary-600 dark:hover:text-primary-500 hover:underline">
                                        {{ .Title }}
                                    </a>
                                    <p class="mt-3 text-base text-gray-900 dark:text-gray-300">
                                        {{ .Params.summary }}
                                    </p>
                                </div>

                                <!-- Affichage des tags avec gestion du débordement -->
                                <div class="flex pt-6 font-medium text-primary-600 dark:text-primary-100 text-md flex-wrap"> <!-- Ajout de flex-wrap -->
                                    <span class="pr-2 font-black">Tags:</span>
                                    {{ range $elem_index, $elem_val := (.GetTerms "tags") }}
                                    <a href="{{ .Permalink }}" class="inline-flex items-center rounded-md bg-gray-300 dark:bg-gray-700 hover:bg-primary-200 hover:text-black px-2.5 py-0.5 mb-1 text-sm font-medium text-gray-900 dark:text-white truncate"> <!-- Ajout de mb-1 et truncate pour limiter la largeur -->
                                        {{ .LinkTitle }}
                                    </a>
                                    {{ end }}
                                </div>

                                <div class="flex items-center mt-6">
                                    <div class="flex-shrink-0">
                                        <span class="sr-only">{{ .Params.author }}</span>
                                        {{ with .Params.authorimage }}
                                        {{ with resources.Get . }}
                                        {{ $authorimage := (.Resize "400x webp").RelPermalink }}
                                        <img class="w-10 h-10 rounded-full" src="{{ $authorimage }}" alt="">
                                        {{ end }}
                                        {{ end }}
                                    </div>
                                    <div class="pt-1 ml-3">
                                        <p class="text-sm font-medium text-gray-900 dark:text-white">
                                            {{ .Params.author }}
                                        </p>
                                        <div class="flex space-x-1 text-sm text-gray-500 dark:text-white">
                                            <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ .Date.Format "2006-01-02" }}</time>
                                            <span aria-hidden="true">&middot;</span>
                                            <span>{{ math.Round (div (countwords .Content) 220.0) }} min read</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{ end }}
                        {{ end }}
                    </div>
                </div>
            </div>
        </div>
    </div>

</main>
{{ end }}